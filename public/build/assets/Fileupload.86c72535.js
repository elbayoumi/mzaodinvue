import{_ as k}from"./LayoutAuthenticated.6f159ece.js";import{Z as D,T as f,k as F,K as c,d as l,a as p,w as h,o as i,f as r,b as m,F as L,s as M,e as v,n as b,t as y}from"./app.e56cf5af.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import"./FormControl.86ba053d.js";import"./colors.ca61e100.js";import"./BaseLevel.c966f92e.js";const C={components:{LayoutAuthenticated:k,Head:D,useForm:f,ref:F},props:{errors:Object,productId:{type:String}},data(){return{files:[],fileDragging:null,fileDropping:null,form:f({image:[]})}},methods:{humanFileSize(t){const e=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,e)).toFixed(2)*1+" "+["B","kB","MB","GB","TB"][e]},remove(t){let e=[...this.files];e.splice(t,1),this.files=this.createFileList(e)},drop(t){let e,n=[...this.files];e=n.splice(this.fileDragging,1),n.splice(this.fileDropping,0,...e),this.files=this.createFileList(n),this.fileDropping=null,this.fileDragging=null},dragenter(t){let e=t.target.closest("[draggable]");this.fileDropping=e.getAttribute("data-index")},dragstart(t,e){this.fileDragging=t.target.closest("[draggable]").getAttribute("data-index"),t.dataTransfer.effectAllowed="move"},loadFile(t){return URL.createObjectURL(t)},addFiles(t){const e=this.createFileList([...this.files],[...t.target.files]);this.files=e},createFileList(t,e=[]){let n=t.slice();for(let u=0;u<e.length;u++)n.push(e[u]);return n},submit(){Array.from(this.files).forEach(e=>{this.form.image.push(e)}),this.form.post(route("admin.image.store",this.productId))}}},z=r("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Image Upload ",-1),A={class:"py-52"},H={class:"bg-white p-7 w-9/12 mx-auto h-auto border-2 border-gray-500 rounded-lg"},j={key:0,class:"grid grid-cols-2 gap-4 mt-4 md:grid-cols-6"},V=["onDragstart","data-index"],I=["onClick"],S=r("svg",{class:"w-4 h-4 text-red-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),U=[S],E={key:0,class:"absolute w-12 h-12 text-gray-400 transform top-1/2 -translate-y-2/3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},O=r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"},null,-1),T=[O],N={key:1,class:"absolute w-12 h-12 text-gray-400 transform top-1/2 -translate-y-2/3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},R=r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),G=[R],K=["src"],Z={key:3,class:"absolute inset-0 object-cover w-full h-full border-4 border-white pointer-events-none preview"},q=["src"],J={class:"absolute bottom-0 left-0 right-0 flex flex-col p-2 text-xs bg-white bg-opacity-50"},P={class:"w-full font-bold text-gray-900 truncate"},Q={class:"text-xs text-gray-900"},W={class:"flex justify-center mt-24"};function X(t,e,n,u,a,s){const w=c("Head"),_=c("LayoutAuthenticated"),x=c("ModalImage");return i(),l("div",null,[p(w,{title:"Dashboard"}),p(_,null,{header:h(()=>[z]),default:h(()=>[r("div",A,[r("div",H,[r("div",{ref:"dnd",class:"relative flex flex-col p-4 text-gray-400 border border-gray-200 rounded",onDrop:e[6]||(e[6]=m(o=>s.drop(o),["prevent"])),onDragover:e[7]||(e[7]=m(o=>o.dataTransfer.dropEffect="move",["prevent"]))},[r("div",{class:"relative flex flex-col text-gray-400 border border-gray-200 border-dashed rounded cursor-pointer",onDragover:e[1]||(e[1]=(...o)=>t.dragOverHandler&&t.dragOverHandler(...o)),onDragleave:e[2]||(e[2]=(...o)=>t.dragLeaveHandler&&t.dragLeaveHandler(...o))},[r("input",{accept:"*",type:"file",multiple:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",onChange:e[0]||(e[0]=o=>s.addFiles(o)),title:""},null,32)],32),a.files.length>0?(i(),l("div",j,[(i(!0),l(L,null,M(a.files,(o,d)=>(i(),l("div",{key:d,class:b(["relative flex flex-col items-center overflow-hidden text-center bg-gray-100 border rounded cursor-move select-none",{"border-blue-600":a.fileDragging==d}]),style:{"padding-top":"100%"},onDragstart:g=>s.dragstart(g,d),onDragend:e[5]||(e[5]=g=>a.fileDragging=null),draggable:"true","data-index":d},[r("button",{class:"absolute top-0 right-0 z-50 p-1 bg-white rounded-bl focus:outline-none",type:"button",onClick:g=>s.remove(d)},U,8,I),o.type.includes("audio/")?(i(),l("svg",E,T)):o.type.includes("application/")||o.type===""?(i(),l("svg",N,G)):o.type.includes("image/")?(i(),l("img",{key:2,class:"absolute inset-0 z-0 object-cover w-full h-full border-4 border-white preview",src:s.loadFile(o)},null,8,K)):o.type.includes("video/")?(i(),l("video",Z,[r("source",{src:s.loadFile(o),type:"video/mp4"},null,8,q)])):v("",!0),r("div",J,[r("span",P,y(o.name),1),r("span",Q,y(s.humanFileSize(o.size)),1)]),r("div",{class:b(["absolute inset-0 z-40 transition-colors duration-300",{"bg-blue-200 bg-opacity-80":a.fileDropping==d&&a.fileDragging!=d}]),onDragenter:e[3]||(e[3]=g=>s.dragenter(g)),onDragleave:e[4]||(e[4]=g=>a.fileDropping=null)},null,34)],42,V))),128))])):v("",!0)],544),r("div",W,[r("button",{onClick:e[8]||(e[8]=o=>s.submit()),type:"submit",class:"px-6 py-2 text-white bg-gray-900 rounded hover:bg-gray-800 focus:outline-none"}," Save ")])])])]),_:1}),p(x)])}const se=B(C,[["render",X]]);export{se as default};
